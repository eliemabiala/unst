{% extends 'base.html.twig' %}

{% block title %}Liste des rendez-vous
{% endblock %}

{% block body %}
	<h1 class="text-2xl font-bold mb-6 text-black">Liste des rendez-vous</h1>

	<table class="min-w-full bg-white border border-gray-200 shadow-md rounded-lg">
		<thead class="bg-gray-50">
			<tr>
				<th class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider">Nom complet</th>
				<th class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider">Email</th>
				<th class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider">Date de création</th>
				<th class="px-6 py-3 text-left text-xs font-medium text-black uppercase tracking-wider">Actions</th>
			</tr>
		</thead>
		<tbody class="bg-white divide-y divide-gray-200">
			{% for appointment in appointments %}
				<tr
					class="hover:bg-gray-50">
					<!-- Nom complet -->
					<td class="px-6 py-4 whitespace-nowrap">
						<div class="text-sm font-medium text-black">{{ appointment.user.profile.name }}
							{{ appointment.user.profile.postname }}
							{{ appointment.user.profile.firstname }}</div>
					</td>

					<!-- Email -->
					<td class="px-6 py-4 whitespace-nowrap">
						<div class="text-sm text-black">{{ appointment.user.email }}</div>
					</td>

					<!-- Date de création -->
					<td class="px-6 py-4 whitespace-nowrap">
						<div class="text-sm text-black">{{ appointment.creationDate ? appointment.creationDate|date('Y-m-d') : '' }}</div>
					</td>

					<!-- Actions -->
					<td class="px-6 py-4 whitespace-nowrap text-sm font-medium flex space-x-4">
						<a href="{{ path('app_appointment_show', {'id': appointment.id}) }}" class="text-blue-500 hover:text-blue-700">Afficher</a>
						<a href="{{ path('app_appointment_edit', {'id': appointment.id}) }}" class="text-yellow-500 hover:text-yellow-700">Modifier</a>

						<!-- Formulaire de suppression -->
						<form method="post" action="{{ path('app_appointment_delete', {'id': appointment.id}) }}" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet élément ?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ appointment.id) }}">
							<button class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" type="submit">
								Supprimer
							</button>
						</form>
					</td>
				</tr>
			{% else %}
				<tr>
					<td colspan="4" class="px-6 py-4 text-center text-black">Aucun enregistrement trouvé</td>
				</tr>
			{% endfor %}
		</tbody>
	</table>

	<div class="mt-6">
		<a href="{{ path('app_appointment_new') }}" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Créer un nouveau rendez-vous</a>
	</div>
{% endblock %}

