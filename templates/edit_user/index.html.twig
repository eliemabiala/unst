{% extends 'base.html.twig' %}

{% block title %}Edit User
{% endblock %}

{% block body %}
	<div class="container mx-auto px-4 py-6">
		<h1 class="text-2xl font-bold mb-4">Edit User Information</h1>
		<form action="{{ path('user_update', { 'id': user.id }) }}" method="post" class="space-y-4">
			{{ csrf_token('edit-user') }}

			<!-- Personal Details -->
			<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
				<div>
					<label for="name" class="text-sm font-medium">Name</label>
					<input type="text" id="name" name="name" value="{{ user.profile.name }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="postname" class="text-sm font-medium">Post Name</label>
					<input type="text" id="postname" name="postname" value="{{ user.profile.postname }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="first_name" class="text-sm font-medium">First Name</label>
					<input type="text" id="first_name" name="first_name" value="{{ user.profile.firstname }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="date_of_birth" class="text-sm font-medium">Date of Birth</label>
					<input type="date" id="date_of_birth" name="date_of_birth" value="{{ user.profile.dateOfBirth|date('Y-m-d') }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="genre" class="text-sm font-medium">Sexe</label>
					<select id="genre" name="genre" class="border border-gray-300 rounded p-2 w-full">
						<option value="male" {{ user.profile.genre.value == 'male' ? 'selected' : '' }}>Male</option>
						<option value="female" {{ user.profile.genre.value == 'female' ? 'selected' : '' }}>Female</option>
					</select>
				</div>
				<div>
					<label for="phone" class="text-sm font-medium">Phone</label>
					<input type="text" id="phone" name="phone" value="{{ user.profile.phone }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
			</div>

			<!-- Account Details -->
			<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
				<div>
					<label for="email" class="text-sm font-medium">Email</label>
					<input type="email" id="email" name="email" value="{{ user.email }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="role" class="text-sm font-medium">Role</label>
					<select id="role" name="role" class="border border-gray-300 rounded p-2 w-full">
						<option value="ROLE_USER" {{ 'ROLE_USER' in user.roles ? 'selected' : '' }}>User</option>
						<option value="ROLE_ADMIN" {{ 'ROLE_ADMIN' in user.roles ? 'selected' : '' }}>Admin</option>
						<option value="ROLE_COACH" {{ 'ROLE_COACH' in user.roles ? 'selected' : '' }}>Coach</option>
					</select>
				</div>
				<div>
					<label for="teams" class="text-sm font-medium">Teams</label>
					<input type="text" id="teams" name="teams" value="{{ user.teams.team }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="password" class="text-sm font-medium">Password</label>
					<input type="password" id="password" name="password" value="" class="border border-gray-300 rounded p-2 w-full">
					<small class="text-gray-600">Leave blank to keep current password</small>
				</div>
			</div>

			<!-- Passport Details -->
			<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
				<div>
					<label for="number_Passport" class="text-sm font-medium">Passport Number</label>
					<input type="text" id="number_Passport" name="number_Passport" value="{{ user.profile.passport.numberPassport }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="date_expiration" class="text-sm font-medium">Expiration Date</label>
					<input type="date" id="date_expiration" name="date_expiration" value="{{ user.profile.passport.dateExpiration|date('Y-m-d') }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="nationalite" class="text-sm font-medium">Nationality</label>
					<input type="text" id="nationalite" name="nationalite" value="{{ user.profile.passport.nationalite }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="profession" class="text-sm font-medium">Profession</label>
					<input type="text" id="profession" name="profession" value="{{ user.profile.passport.profession }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
			</div>

			<!-- Other Information -->
			<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
				<div>
					<label for="address" class="text-sm font-medium">Address</label>
					<input type="text" id="address" name="address" value="{{ user.profile.address }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="status_demarches" class="text-sm font-medium">Status of Demarches</label>
					<input type="text" id="status_demarches" name="status_demarches" value="{{ user.profile.passport.statusDemarches }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
				<div>
					<label for="date_inscrit" class="text-sm font-medium">Date of Inscription</label>
					<input type="date" id="date_inscrit" name="date_inscrit" value="{{ user.profile.dateInscrit|date('Y-m-d') }}" class="border border-gray-300 rounded p-2 w-full">
				</div>
			</div>

			<!-- Submit Button -->
			<div class="mt-4">
				<button type="submit" class="bg-[#14213D] text-white py-2 px-4 rounded hover:text-[#b49047]">Save Changes</button>
			</div>
		</form>
	</div>
{% endblock %}

